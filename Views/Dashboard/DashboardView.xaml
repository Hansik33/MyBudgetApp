<?xml version="1.0" encoding="utf-8"?>
<UserControl
    x:Class="MyBudgetApp.Views.Dashboard.DashboardView"
    x:Name="Root"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:MyBudgetApp.Views.Dashboard"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:viewmodels="using:MyBudgetApp.ViewModels.Dashboard" 
    mc:Ignorable="d"
    d:DataContext="{d:DesignInstance Type=viewmodels:DashboardViewModel}">

    <ScrollViewer>

        <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center" 
                    MaxWidth="500" MinWidth="280" Padding="40" Spacing="14">

            <TextBlock HorizontalAlignment="Center" FontSize="16">
                <Run Text="Saldo:" FontWeight="Bold" />
                <Run Text="{Binding Balance}" />
            </TextBlock>
            
            <TextBlock Text="Budżety" FontWeight="Bold" FontSize="16" />
            <ItemsControl ItemsSource="{Binding Budgets}">
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <Border BorderThickness="1" BorderBrush="DarkGray" Padding="6" Margin="0,4,0,4" CornerRadius="4">
                            <StackPanel Orientation="Vertical" Spacing="4">
                                <Button Content="✕" Command="{Binding DataContext.RemoveBudgetCommand, ElementName=Root}"
                            CommandParameter="{Binding}" HorizontalAlignment="Center"
                            FontSize="16" Padding="0" Margin="0,0,0,10" Width="32" Height="32" />
                                <TextBlock>
                                    <Run Text="Kategoria:" FontWeight="Bold" />
                                    <Run Text="{Binding Category}" />
                                </TextBlock>
                                <TextBlock>
                                    <Run Text="Miesiąc:" FontWeight="Bold" />
                                    <Run Text="{Binding Month}" />
                                </TextBlock>
                                <TextBlock>
                                    <Run Text="Rok:" FontWeight="Bold" />
                                    <Run Text="{Binding Year}" />
                                </TextBlock>
                                <TextBlock Text="Limit:" FontWeight="Bold" />
                                <TextBlock Text="{Binding UsagePercent}" HorizontalAlignment="Center" />
                                <ProgressBar Minimum="0"
                                 Maximum="{Binding LimitAmountDouble}"
                                 Value="{Binding UsedAmountDouble}"
                                 Foreground="{Binding UsageBrush}" Height="8" />
                                <TextBlock Text="{Binding UsageLimit}" HorizontalAlignment="Center" />
                            </StackPanel>
                        </Border>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
            <Button Content="Dodaj budżet" Command="{Binding AddBudgetCommand}" 
                    HorizontalAlignment="Center" Margin="0,10,0,0" />
            <Rectangle Height="1" Fill="Gray" Margin="0,10,0,10" />

            <TextBlock Text="Transakcje" FontWeight="Bold" FontSize="16" />
            <ItemsControl ItemsSource="{Binding Transactions}">
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <Border BorderThickness="1" BorderBrush="DarkGray" Padding="6" Margin="0,4,0,4" CornerRadius="4">
                            <StackPanel Orientation="Vertical" Spacing="2">
                                <Button Content="✕" Command="{Binding DataContext.RemoveBudgetCommand, ElementName=Root}"
                                        CommandParameter="{Binding}" HorizontalAlignment="Center"
                                        FontSize="16" Padding="0" Margin="0,0,0,10" Width="32" Height="32" />
                                <TextBlock>
                                    <Run Text="Typ:" FontWeight="Bold" />
                                    <Run Text="{Binding Type}" />
                                </TextBlock>
                                <TextBlock>
                                    <Run Text="Kategoria:" FontWeight="Bold" />
                                    <Run Text="{Binding Category}" />
                                </TextBlock>
                                <TextBlock>
                                    <Run Text="Kwota:" FontWeight="Bold" />
                                    <Run Text="{Binding Amount}" />
                                    <Run Text="zł" />
                                </TextBlock>
                                <TextBlock>
                                    <Run Text="Metoda płatności:" FontWeight="Bold" />
                                    <Run Text="{Binding PaymentMethod}" />
                                </TextBlock>
                                <TextBlock>
                                    <Run Text="Opis:" FontWeight="Bold" />
                                    <Run Text="{Binding Description}" />
                                </TextBlock>
                                <TextBlock>
                                    <Run Text="Miesiąc:" FontWeight="Bold" />
                                    <Run Text="{Binding Month}" />
                                </TextBlock>
                                <TextBlock>
                                    <Run Text="Rok:" FontWeight="Bold" />
                                    <Run Text="{Binding Year}" />
                                </TextBlock>
                            </StackPanel>
                        </Border>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
            <Button Content="Dodaj transakcję" Command="{Binding AddTransactionCommand}" 
                    HorizontalAlignment="Center" Margin="0,10,0,0" />
            <Rectangle Height="1" Fill="Gray" Margin="0,10,0,10" />

            <TextBlock Text="Wpłaty do celów" FontWeight="Bold" FontSize="16" />
            <ItemsControl ItemsSource="{Binding Savings}">
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <Border BorderThickness="1" BorderBrush="DarkGray" Padding="6" Margin="0,4,0,4" CornerRadius="4">
                            <StackPanel Orientation="Vertical" Spacing="2">
                                <TextBlock>
                                    <Run Text="Cel:" FontWeight="Bold"/>
                                    <Run Text="{Binding Goal}" />
                                </TextBlock>
                                <TextBlock>
                                    <Run Text="Kwota:" FontWeight="Bold"/>
                                    <Run Text="{Binding Amount}" />
                                    <Run Text="zł" />
                                </TextBlock>
                                <TextBlock>
                                    <Run Text="Data:" FontWeight="Bold"/>
                                    <Run Text="{Binding Date}" />
                                </TextBlock>
                                <TextBlock>
                                    <Run Text="Godzina:" FontWeight="Bold"/>
                                    <Run Text="{Binding Time}" />
                                </TextBlock>
                            </StackPanel>
                        </Border>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
            <Button Content="Dodaj wpłatę" Command="{Binding AddSavingCommand}" 
                    HorizontalAlignment="Center" Margin="0,10,0,0" />
            <Rectangle Height="1" Fill="Gray" Margin="0,10,0,10" />

            <TextBlock Text="Cele oszczędnościowe" FontWeight="Bold" FontSize="16" />
            <ItemsControl ItemsSource="{Binding SavingGoals}">
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <Border BorderThickness="1" BorderBrush="DarkGray" Padding="6" Margin="0,4,0,4" CornerRadius="4">
                            <StackPanel Orientation="Vertical" Spacing="4">
                                <Button Content="✕" Command="{Binding DataContext.RemoveBudgetCommand, ElementName=Root}"
                                        CommandParameter="{Binding}" HorizontalAlignment="Center"
                                        FontSize="16" Padding="0" Margin="0,0,0,10" Width="32" Height="32" />
                                <TextBlock>
                                    <Run Text="Cel:" FontWeight="Bold" />
                                    <Run Text="{Binding Goal}" />
                                </TextBlock>
                                <TextBlock>
                                    <Run Text="Termin:" FontWeight="Bold" />
                                    <Run Text="{Binding Deadline}" />
                                </TextBlock>
                                <TextBlock Text="Postęp:" FontWeight="Bold" />
                                <TextBlock Text="{Binding ProgressPercent}" HorizontalAlignment="Center" />
                                <ProgressBar Minimum="0"
                                             Maximum="{Binding TargetAmountDouble}" 
                                             Value="{Binding SavedAmountDouble}"
                                             Foreground="{Binding ProgressBrush}" Height="8" />
                                <TextBlock Text="{Binding ProgressAmount}" HorizontalAlignment="Center" />
                            </StackPanel>
                        </Border>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
            <Button Content="Dodaj cel" Command="{Binding AddSavingGoalCommand}" 
                    HorizontalAlignment="Center" Margin="0,10,0,0" />
            <Rectangle Height="1" Fill="Gray" Margin="0,10,0,10" />

            <TextBlock HorizontalAlignment="Center">
                <Run Text="Zalogowano jako:" />
                <Run Text="{Binding Username}" FontWeight="Bold" />
            </TextBlock>
            <Button Content="Wyloguj się" Command="{Binding LogoutCommand}" HorizontalAlignment="Center" />

        </StackPanel>

    </ScrollViewer>

</UserControl>